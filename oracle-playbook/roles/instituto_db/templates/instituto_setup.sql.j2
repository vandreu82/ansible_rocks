ALTER SESSION SET CONTAINER=INSTITUTO;
WHENEVER SQLERROR EXIT SQL.SQLCODE;

-- Tabla de profesor
CREATE TABLE profesor (
  id_profesor NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  nombre VARCHAR2(100 CHAR),
  especialidad VARCHAR2(100 CHAR)
);

INSERT INTO profesor (id_profesor, nombre, especialidad) VALUES (1, 'Alejandro Roca Alhama', 'Sistemas');
INSERT INTO profesor (id_profesor, nombre, especialidad) VALUES (2, 'Jose Antonio Jamonino', 'Aplicaciones Web');
INSERT INTO profesor (id_profesor, nombre, especialidad) VALUES (3, 'Antonio Pelegrin', 'Servicios en Red');
INSERT INTO profesor (id_profesor, nombre, especialidad) VALUES (4, 'Cayetano Reinaldos Duarte', 'Base de datos');
INSERT INTO profesor (id_profesor, nombre, especialidad) VALUES (5, 'Samuel Rabadan', 'Seguridad Informatica');

-- Tabla de alumno
CREATE TABLE alumno (
  id_alumno NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  nombre VARCHAR2(100 CHAR),
  curso VARCHAR2(50 CHAR)
);

INSERT INTO alumno (id_alumno, nombre, curso) VALUES (1, 'Juan Carrasco Milla', '2 ASIR');
INSERT INTO alumno (id_alumno, nombre, curso) VALUES (2, 'Victor Manuel Andreu Felipe', '2 ASIR');
INSERT INTO alumno (id_alumno, nombre, curso) VALUES (3, 'Alejandro Burruezo Burru', '2 ASIR');
INSERT INTO alumno (id_alumno, nombre, curso) VALUES (4, 'Jose Corominas Pepe', '2 ASIR');
INSERT INTO alumno (id_alumno, nombre, curso) VALUES (5, 'Pablo Guerrero Bernal', '2 ASIR');
INSERT INTO alumno (id_alumno, nombre, curso) VALUES (6, 'Moises Lacabra GOAT', '2 ASIR');

-- Tabla de curso
CREATE TABLE curso (
  id_curso NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  nombre VARCHAR2(50 CHAR)
);

INSERT INTO curso (id_curso, nombre) VALUES (1, '2 ASIR');

-- Tabla de asignatura
CREATE TABLE asignatura (
  id_asignatura NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  nombre VARCHAR2(100 CHAR),
  profesor_id NUMBER,
  CONSTRAINT fk_profesor FOREIGN KEY (profesor_id) REFERENCES profesor(id_profesor)
);

-- Insertamos las asignatura con IDs expl√≠citos
INSERT INTO asignatura (id_asignatura, nombre, profesor_id) VALUES (1, 'Bases de datos', 4);
INSERT INTO asignatura (id_asignatura, nombre, profesor_id) VALUES (2, 'Sistemas', 1);
INSERT INTO asignatura (id_asignatura, nombre, profesor_id) VALUES (3, 'Aplicaciones Web', 2);
INSERT INTO asignatura (id_asignatura, nombre, profesor_id) VALUES (4, 'Seguridad Informatica', 5);

-- Tabla de matricula
CREATE TABLE matricula (
  id_matricula NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  alumno_id NUMBER,
  asignatura_id NUMBER,
  nota NUMBER(3,1),
  CONSTRAINT fk_alumno FOREIGN KEY (alumno_id) REFERENCES alumno(id_alumno),
  CONSTRAINT fk_asignatura FOREIGN KEY (asignatura_id) REFERENCES asignatura(id_asignatura)
);

-- Insertamos matricula (ya funcionan porque los IDs existen)
INSERT INTO matricula (alumno_id, asignatura_id, nota) VALUES (1, 1, 8.5);
INSERT INTO matricula (alumno_id, asignatura_id, nota) VALUES (2, 2, 7.0);
INSERT INTO matricula (alumno_id, asignatura_id, nota) VALUES (3, 3, 9.0);
INSERT INTO matricula (alumno_id, asignatura_id, nota) VALUES (4, 1, 6.5);
INSERT INTO matricula (alumno_id, asignatura_id, nota) VALUES (5, 4, 7.5);
INSERT INTO matricula (alumno_id, asignatura_id, nota) VALUES (6, 2, 8.0);

COMMIT;
EXIT;
