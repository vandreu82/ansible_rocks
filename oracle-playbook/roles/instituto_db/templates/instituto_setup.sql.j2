ALTER SESSION SET CONTAINER=INSTITUTO;
WHENEVER SQLERROR EXIT SQL.SQLCODE;

-- Tabla de profesores
CREATE TABLE profesores (
  id_profesor NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  nombre VARCHAR2(100 CHAR),
  especialidad VARCHAR2(100 CHAR)
);

INSERT INTO profesores (id_profesor, nombre, especialidad) VALUES (1, 'Alejandro Roca Alhama', 'Sistemas');
INSERT INTO profesores (id_profesor, nombre, especialidad) VALUES (2, 'Jose Antonio Moñino', 'Aplicaciones Web');
INSERT INTO profesores (id_profesor, nombre, especialidad) VALUES (3, 'Antonio Pelegrin', 'Servicios en Red');
INSERT INTO profesores (id_profesor, nombre, especialidad) VALUES (4, 'Cayetano Reinaldos Duarte', 'Base de datos');
INSERT INTO profesores (id_profesor, nombre, especialidad) VALUES (5, 'Samuel Rabadan', 'Seguridad Informática');
INSERT INTO profesores (id_profesor, nombre, especialidad) VALUES (6, 'Miguel Angel Ibañez', 'Redes');

-- Tabla de alumnos
CREATE TABLE alumnos (
  id_alumno NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  nombre VARCHAR2(100 CHAR),
  curso VARCHAR2(50 CHAR)
);

INSERT INTO alumnos (id_alumno, nombre, curso) VALUES (1, 'Juan Carrasco Milla', '2 ASIR');
INSERT INTO alumnos (id_alumno, nombre, curso) VALUES (2, 'Victor Manuel Andreu Felipe', '2 ASIR');
INSERT INTO alumnos (id_alumno, nombre, curso) VALUES (3, 'Alejandro Burruezo Burru', '2 ASIR');
INSERT INTO alumnos (id_alumno, nombre, curso) VALUES (4, 'Jose Corominas Pepe', '2 ASIR');
INSERT INTO alumnos (id_alumno, nombre, curso) VALUES (5, 'Pablo Guerrero Bernal', '2 ASIR');
INSERT INTO alumnos (id_alumno, nombre, curso) VALUES (6, 'Moises Lacabra GOAT', '2 ASIR');

-- Tabla de cursos
CREATE TABLE cursos (
  id_curso NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  nombre VARCHAR2(50 CHAR)
);

INSERT INTO cursos (id_curso, nombre) VALUES (1, '2 ASIR');

-- Tabla de asignaturas
CREATE TABLE asignaturas (
  id_asignatura NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  nombre VARCHAR2(100 CHAR),
  profesor_id NUMBER,
  CONSTRAINT fk_profesor FOREIGN KEY (profesor_id) REFERENCES profesores(id_profesor)
);

-- Insertamos las asignaturas con IDs explícitos
INSERT INTO asignaturas (id_asignatura, nombre, profesor_id) VALUES (1, 'Redes', 6);
INSERT INTO asignaturas (id_asignatura, nombre, profesor_id) VALUES (2, 'Sistemas', 1);
INSERT INTO asignaturas (id_asignatura, nombre, profesor_id) VALUES (3, 'Aplicaciones Web', 2);
INSERT INTO asignaturas (id_asignatura, nombre, profesor_id) VALUES (4, 'Seguridad', 5);

-- Tabla de matriculas
CREATE TABLE matriculas (
  id_matricula NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  alumno_id NUMBER,
  asignatura_id NUMBER,
  nota NUMBER(3,1),
  CONSTRAINT fk_alumno FOREIGN KEY (alumno_id) REFERENCES alumnos(id_alumno),
  CONSTRAINT fk_asignatura FOREIGN KEY (asignatura_id) REFERENCES asignaturas(id_asignatura)
);

-- Insertamos matriculas (ya funcionan porque los IDs existen)
INSERT INTO matriculas (alumno_id, asignatura_id, nota) VALUES (1, 1, 8.5);
INSERT INTO matriculas (alumno_id, asignatura_id, nota) VALUES (2, 2, 7.0);
INSERT INTO matriculas (alumno_id, asignatura_id, nota) VALUES (3, 3, 9.0);
INSERT INTO matriculas (alumno_id, asignatura_id, nota) VALUES (4, 1, 6.5);
INSERT INTO matriculas (alumno_id, asignatura_id, nota) VALUES (5, 4, 7.5);
INSERT INTO matriculas (alumno_id, asignatura_id, nota) VALUES (6, 2, 8.0);

COMMIT;
EXIT;
