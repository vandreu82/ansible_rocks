---
- name: Crear directorio ORACLE_HOME
  ansible.builtin.file:
    path: "{{ oracle_home }}"
    state: directory
    owner: oracle
    group: oinstall
    mode: '0755'
  become: yes

- name: Descomprimir instalador de Oracle 23c AI
  ansible.builtin.unarchive:
    src: "/home/oracle/{{ oracle_installer_zip }}"
    dest: "{{ oracle_home }}"
    remote_src: yes
  become: yes

- name: Ajustar permisos de /u01
  ansible.builtin.command: chown -R oracle:oinstall /u01
  become: yes

- name: Ajustar permisos de ejecuciÃ³n en /u01
  ansible.builtin.command: chmod -R 755 /u01
  become: yes

- name: Ejecutar instalador de Oracle 23c AI en modo silent
  ansible.builtin.command: >
    {{ oracle_home }}/runInstaller -silent -responseFile {{ oracle_home }}/install/response/db_install.rsp -ignorePrereqFailure
  become_user: oracle
