---
- name: Crear /u01/app/ si no existe
  ansible.builtin.file:
    path: /u01/app/
    state: directory
    owner: oracle
    group: oinstall
    mode: '0755'

- name: Descomprimir instalador de Oracle en el host remoto
  ansible.builtin.unarchive:
    src: "/home/oracle/LINUX.X64_193000_db_home.zip"
    dest: "/u01/app/"
    remote_src: yes

- name: Descomprimir instaladores
  ansible.builtin.unarchive:
    src: "/tmp/{{ item }}"
    dest: /u01/app/
    remote_src: yes
  loop: "{{ oracle_installers }}"

- name: Ejecutar instalador en modo silent
  ansible.builtin.command: >
    /u01/app/database/runInstaller -silent -responseFile /tmp/db_install.rsp
  become_user: oracle
  args:
    creates: /u01/app/oracle/product/19c/dbhome_1/bin/sqlplus

# tasks file for roles/oracle_install
